"use strict";var __decorate=this&&this.__decorate||function(e,t,r,o){var n,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(i=(a<3?n(i):a>3?n(t,r,i):n(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},core_1=require("@angular/core"),share_buttons_class_1=require("../../helpers/share-buttons.class"),share_buttons_service_1=require("../../service/share-buttons.service"),ShareButtonComponent=function(){function e(e,t,r){this.sbService=e,this.renderer=t,this.elementRef=r,this.count=!1,this.countOuter=new core_1.EventEmitter}return e.prototype.ngAfterViewInit=function(){var e=this;if(this.url){var t=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;t.test(this.url)||(console.warn("Invalid URL, switching to window.location.href"),this.url=window.location.href)}else this.url=window.location.href;this.renderer.setElementProperty(this.btn.nativeElement,"innerHTML",this.button.template),this.renderer.setElementClass(this.btn.nativeElement,this.button.classes,!0),this.count&&this.sbService.count(this.button.provider,this.url).subscribe(function(t){if(t){var r=e.renderer.createElement(e.elementRef.nativeElement,"span");e.renderer.setElementClass(r,"sb-button-count",!0),e.renderer.setElementProperty(r,"textContent",e.nFormatter(t,1)),e.countOuter.emit(t)}})},e.prototype.share=function(){var e=new share_buttons_class_1.ShareArgs(this.url,this.title,this.description,this.image,this.tags);window.open(this.sbService.share(this.button.provider,e),"newwindow",this.sbService.windowAttr())},e.prototype.nFormatter=function(e,t){var r,o=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"K"}],n=/\.0+$|(\.[0-9]*[1-9])0+$/;for(r=0;r<o.length;r++)if(e>=o[r].value)return(e/o[r].value).toFixed(t).replace(n,"$1")+o[r].symbol;return e.toFixed(t).replace(n,"$1")},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"url",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"title",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"description",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"image",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"tags",void 0),__decorate([core_1.Input(),__metadata("design:type",share_buttons_class_1.ShareButton)],e.prototype,"button",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"count",void 0),__decorate([core_1.Output(),__metadata("design:type",Object)],e.prototype,"countOuter",void 0),__decorate([core_1.ViewChild("btn"),__metadata("design:type",core_1.ElementRef)],e.prototype,"btn",void 0),e=__decorate([core_1.Component({selector:"share-button",template:'<button  #btn (click)="share()"></button>',changeDetection:core_1.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[share_buttons_service_1.ShareButtonsService,core_1.Renderer,core_1.ElementRef])],e)}();exports.ShareButtonComponent=ShareButtonComponent;
//# sourceMappingURL=share-button.component.js.map
